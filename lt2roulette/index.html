<!DOCTYPE html>

<html>
    <head>
        <title>LT2 Roulette</title>
        <style>
            * {
                font-family: Arial, Helvetica, sans-serif;
            }
        </style>
    </head>


    <body>
        <h1>LT2 Roulette</h1>
        <p>
            <div id="points">Points: 0</div> </br>
            <div id="skips">Skips: 3 </div> </br>
            <div id= "cchallenge">Current challenge:</div> </br>
            <button id="genbutton">Generate a new challenge!</button>
            <button id="donebutton">Finish!</button>
            <button id="skipbutton">Skip!</button> 
        </p>
    </body>

    <footer>
        <script>
            var PointsElement = document.getElementById("points");
            var SkipsElement = document.getElementById("skips");
            var ChallengeElement = document.getElementById("cchallenge");
            var CButton = document.getElementById("genbutton");
            var DoneButton = document.getElementById("donebutton");
            var SkipButton = document.getElementById("skipbutton");
            

            var Challenges = [
                ["Get oak", 1],
                ["Get cherry", 1],
                ["Get elm", 1],
                ["Get birch", 2],
                ["Get walnut", 5],
                ["Get pine or fir", 7],
                ["get frost", 15],
                ["Get koa", 20],
                ["get lava", 30],
                ["Get zombie", 35],
                ["Get gold", 35],
                ["Get cavecrawler", 50],
                ["Get phantom", 100]
            ];
            var CurrentPointsWorth = 0
            var TotalPoints = 0;
            var ChallengesCompleted = 0;
            var SkipsUsed = 0;

            // random element from array
            getRandomElementFromArray = function (list) {
                return list[Math.floor((Math.random()*list.length))];
            }

            // Listen for button clicks
            CButton.onclick = function() {
                if (CButton.innerHTML == "Generate a new challenge!"){
                    CButton.innerText = "Generate another challenge!"
                }

                var ChallengeArray = getRandomElementFromArray(Challenges);

                console.log(ChallengeArray[0]);
                console.log(ChallengeArray[1]);

                ChallengeElement.innerHTML = "Current challenge: " + ChallengeArray[0];

                TotalPoints = TotalPoints + CurrentPointsWorth
                PointsElement.innerHTML = "Points: " + TotalPoints.toString(10)

                CurrentPointsWorth = ChallengeArray[1]
            }

            DoneButton.onclick = function() {
                // reset everything to defaults
                PointsElement.innerHTML = "Points: 0"
                SkipsElement.innerHTML = "Skips: 3"
                ChallengeElement.innerHTML = "Current challenge:"
                CButton.innerHTML = "Generate a new challenge!"
                alert("FINAL STATS:\n Points: " + TotalPoints.toString(10) + "\n Total challenges completed: " + ChallengesCompleted.toString(10) + "\n Skips used: " + SkipsUsed.toString(10) + "\n Good job!")
            }

            SkipButton.onclick = function(){
                if(SkipsUsed < 3 ){
                    SkipsUsed++;

                    var ChallengeArray = getRandomElementFromArray(Challenges);
                    ChallengeElement.innerHTML = "Current challenge: " + ChallengeArray[0];
                    PointsElement.innerHTML = "Points: " + TotalPoints.toString(10)
                    CurrentPointsWorth = ChallengeArray[1]
                } else {
                    alert("You have no skips left!")
                    DoneButton.onclick()
                }
            }
        </script>
    </footer>
</html>
